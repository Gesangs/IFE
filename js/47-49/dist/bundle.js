!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);const n=[{name:"糖醋排骨",cost:20,price:50,time:2e3},{name:"醋溜山药",cost:10,price:30,time:4e3},{name:"茄子烧豆角",cost:10,price:30,time:1e3},{name:"香辣小龙虾",cost:80,price:160,time:6e3},{name:"鱿鱼炖排骨",cost:30,price:60,time:5e3},{name:"猪肉粽子",cost:20,price:40,time:3e3},{name:"香菜拌豆干",cost:5,price:20,time:2e3},{name:"榴莲班戟",cost:30,price:80,time:5e3}];function i(t,e){return new Promise((s,n)=>{setTimeout(()=>{s(e)},t)})}class o{constructor(t){this.name=t.name,this.profit=t.price-t.cost,this.state=null,this.time=t.time}start(){}}class r{constructor(){if(new.target===r)throw new Error("本类不能实例化");this.next=null}setNext(t){this.next=t}handleRequest(){}}function a(t){return Math.floor(Math.random()*(t-1))}class c extends r{constructor(t){if(super(t),new.target===c)throw new Error("本类不能实例化");this.id=t.id,this.name=t.name,this.wage=t.wage}work(){console.log("请分配工作！")}}const u=new class{constructor(t){this.cash=t.cash,this.seats=t.seats,this.staff=t.staff,this.customerQueue=[]}hire(t){let e=!1;this.staff.map(s=>{s.id===t.id&&(e=!0)}),e?console.log("该员工已经聘用过了！"):this.staff.push(t)}fire(t){this.staff.map((e,s)=>{e.id===t.id&&this.staff.splice(s,1)})}setCustomerQueue(){}}({cash:1e6,seats:1,staff:[]}),h=new class extends c{constructor(t){super(t),this.cooking=this.cooking.bind(this)}async cooking(t){let e,s=[...t];for(;e=s.shift();)await i(e.time,e).then(this.next.work)}}({id:1,name:"cook",wage:1e4}),l=new class extends c{constructor(t){super(t),this.work=this.work.bind(this)}async work(t){if(Array.isArray(t)){let e="";t.map(t=>{e+=t.name+"、"}),console.log("您点了"+e),await i(500,t).then(this.next.cooking)}else console.log(t.name+"做好了"),await i(500,t).then(this.next.eat)}}({id:2,name:"waiter",wage:8e3});u.hire(h),u.hire(l);const f=new class extends r{constructor(t){super(),this.name=t,this.foodList=[],this.cash=null,this.order=this.order.bind(this),this.eat=this.eat.bind(this)}async order(){console.log(this.name+"：小儿请上菜！");let t=a(4)+1;for(;t;){let e=a(n.length),s=new o(n[e]);this.foodList.push(s),t--}await i(3e3,this.foodList).then(this.next.work)}setFoodList(t){this.foodList.push(t)}async eat(t){let e=null;for(;e=this.foodList.shift();)await i(2e3,t).then(t=>{console.log(t.name+"真美味")})}}("xiaoming");f.setNext(l),l.setNext(h),h.setNext(l),f.order()}]);